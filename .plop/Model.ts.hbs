import {Optional, Sequelize, ModelAttributes, Model, DataTypes} from 'sequelize';

export const {{model.name}}Factory = (sequelize: Sequelize) => {
  const {{model.name}} = sequelize.define('{{model.name}}', {
  {{#each scalarFields}}
    {{name}}: {
      type: {{#if isList}}DataTypes.ARRAY(DataTypes.{{type}}){{else}}DataTypes.{{type}}{{/if}},{{#if (eq allowNull false)}}
      allowNull: {{allowNull}},{{/if}}{{#if isId}}
      primaryKey: {{isId}},{{/if}}{{#if isAutoincrement}}
      autoIncrement: {{isAutoincrement}},{{/if}}{{#if isUnique}}
      unique: {{isUnique}},{{/if}}
    },
  {{/each}}
  }, {
    tableName: '{{#if model.dbName}}{{model.dbName}}{{else}}{{model.name}}{{/if}}',
    timestamps: {{or (or hasCreatedAt hasUpdatedAt) hasDeletedAt}},{{#if (or (or hasCreatedAt hasUpdatedAt) hasDeletedAt)}}{{#if (eq hasCreatedAt false)}}
    createdAt: false,{{/if}}{{#if (eq hasUpdatedAt false)}}
    updatedAt: false,{{/if}}{{!-- {{#if (eq hasDeletedAt false)}}
    deletedAt: false,{{/if}} --}}{{#if hasDeletedAt}}
    paranoid: true,{{/if}}{{/if}}
  });

  return {{model.name}};
};
